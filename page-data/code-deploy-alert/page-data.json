{"componentChunkName":"component---src-templates-post-jsx","path":"/code-deploy-alert/","result":{"data":{"site":{"siteMetadata":{"title":"kibeom"}},"markdownRemark":{"id":"0104e895-f5ea-580a-8d40-329236045d50","excerpt":"기존에 사용한 블로그에서 글을 옮겼습니다. 비슷한 내용을 발견하실 수도 있습니다. 지난번에 CodeDeploy에 배포가 제대로 되지 않으면서 배치가 제대로 돌지 못한 일이 있었습니다.  이에 어플리케이션의 배포 결과를 슬랙으로 알림을 받아 볼 수 있도록 설정해보았습니다.  전체 흐름은 다음과 같습니다. CodeDeploy 배포 성공/실패 -> SNS ->…","html":"<blockquote>\n<p>기존에 사용한 블로그에서 글을 옮겼습니다. 비슷한 내용을 발견하실 수도 있습니다.</p>\n</blockquote>\n<p>지난번에 CodeDeploy에 배포가 제대로 되지 않으면서 배치가 제대로 돌지 못한 일이 있었습니다. </p>\n<p>이에 어플리케이션의 배포 결과를 슬랙으로 알림을 받아 볼 수 있도록 설정해보았습니다. </p>\n<p>전체 흐름은 다음과 같습니다.</p>\n<p>CodeDeploy 배포 성공/실패 -> SNS -> Lambda -> Slack</p>\n<h2 id=\"Lambda-생성\" style=\"position:relative;\"><a href=\"#Lambda-%EC%83%9D%EC%84%B1\" aria-label=\"Lambda 생성 permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>Lambda 생성</h2>\n<p>먼저 AWS Lambda 로 가서 새로운 함수를 생성해 줍니다. 함수의 역할은 이벤트 발생시 해당 이벤트의 메세지에서 필요한 내용을 가공하여 슬랙 채널로 발송하는 것입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> boto3\n<span class=\"token keyword\">import</span> json\n<span class=\"token keyword\">import</span> logging\n<span class=\"token keyword\">import</span> os\n\n<span class=\"token keyword\">from</span> base64 <span class=\"token keyword\">import</span> b64decode\n<span class=\"token keyword\">from</span> urllib<span class=\"token punctuation\">.</span>request <span class=\"token keyword\">import</span> Request<span class=\"token punctuation\">,</span> urlopen\n<span class=\"token keyword\">from</span> urllib<span class=\"token punctuation\">.</span>error <span class=\"token keyword\">import</span> URLError<span class=\"token punctuation\">,</span> HTTPError\n\n<span class=\"token keyword\">from</span> datetime <span class=\"token keyword\">import</span> datetime<span class=\"token punctuation\">,</span> timedelta\n\nHOOK_URL <span class=\"token operator\">=</span> os<span class=\"token punctuation\">.</span>environ<span class=\"token punctuation\">[</span><span class=\"token string\">'HOOK_URL'</span><span class=\"token punctuation\">]</span>\n\nlogger <span class=\"token operator\">=</span> logging<span class=\"token punctuation\">.</span>getLogger<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nlogger<span class=\"token punctuation\">.</span>setLevel<span class=\"token punctuation\">(</span>logging<span class=\"token punctuation\">.</span>INFO<span class=\"token punctuation\">)</span>\n\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">lambda_handler</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">,</span> context<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">def</span> <span class=\"token function\">utc_to_kst</span><span class=\"token punctuation\">(</span>d<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        d <span class=\"token operator\">=</span> datetime<span class=\"token punctuation\">.</span>strptime<span class=\"token punctuation\">(</span>d<span class=\"token punctuation\">,</span> <span class=\"token string\">\"%a %b %d %H:%M:%S %Z %Y\"</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>d <span class=\"token operator\">+</span> timedelta<span class=\"token punctuation\">(</span>hours<span class=\"token operator\">=</span><span class=\"token number\">9</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>strftime<span class=\"token punctuation\">(</span><span class=\"token string\">\"%Y-%m-%d %H:%M:%S\"</span><span class=\"token punctuation\">)</span>\n        \n        \n    logger<span class=\"token punctuation\">.</span>info<span class=\"token punctuation\">(</span><span class=\"token string\">\"Event: \"</span> <span class=\"token operator\">+</span> <span class=\"token builtin\">str</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    message <span class=\"token operator\">=</span> json<span class=\"token punctuation\">.</span>loads<span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">[</span><span class=\"token string\">'Records'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token string\">'Sns'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token string\">'Message'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n    subject <span class=\"token operator\">=</span> event<span class=\"token punctuation\">[</span><span class=\"token string\">'Records'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token string\">'Sns'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token string\">'Subject'</span><span class=\"token punctuation\">]</span>\n    logger<span class=\"token punctuation\">.</span>info<span class=\"token punctuation\">(</span><span class=\"token string\">\"Message: \"</span> <span class=\"token operator\">+</span> <span class=\"token builtin\">str</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n    event_trigger_name <span class=\"token operator\">=</span> message<span class=\"token punctuation\">[</span><span class=\"token string\">'eventTriggerName'</span><span class=\"token punctuation\">]</span>\n    status <span class=\"token operator\">=</span> message<span class=\"token punctuation\">[</span><span class=\"token string\">'status'</span><span class=\"token punctuation\">]</span>\n    app_name <span class=\"token operator\">=</span> message<span class=\"token punctuation\">[</span><span class=\"token string\">'applicationName'</span><span class=\"token punctuation\">]</span>\n    deploy_group_name <span class=\"token operator\">=</span> message<span class=\"token punctuation\">[</span><span class=\"token string\">'deploymentGroupName'</span><span class=\"token punctuation\">]</span>\n    deploy_id <span class=\"token operator\">=</span> message<span class=\"token punctuation\">[</span><span class=\"token string\">'deploymentId'</span><span class=\"token punctuation\">]</span>\n    create_time <span class=\"token operator\">=</span> message<span class=\"token punctuation\">[</span><span class=\"token string\">'createTime'</span><span class=\"token punctuation\">]</span>\n    complete_time <span class=\"token operator\">=</span> message<span class=\"token punctuation\">[</span><span class=\"token string\">'completeTime'</span><span class=\"token punctuation\">]</span>\n    \n    logger<span class=\"token punctuation\">.</span>info<span class=\"token punctuation\">(</span>utc_to_kst<span class=\"token punctuation\">(</span>create_time<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    \n    color <span class=\"token operator\">=</span> <span class=\"token string\">'good'</span>\n    <span class=\"token keyword\">if</span> status<span class=\"token punctuation\">.</span>lower<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token string\">'failed'</span><span class=\"token punctuation\">:</span>\n        color <span class=\"token operator\">=</span> <span class=\"token string\">'danger'</span>\n    \n    fields <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token punctuation\">{</span>\n            <span class=\"token string\">\"title\"</span> <span class=\"token punctuation\">:</span> <span class=\"token string\">\"Task\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"value\"</span> <span class=\"token punctuation\">:</span> event_trigger_name<span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"short\"</span> <span class=\"token punctuation\">:</span> <span class=\"token boolean\">True</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">{</span>\n            <span class=\"token string\">\"title\"</span> <span class=\"token punctuation\">:</span> <span class=\"token string\">\"Status\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"value\"</span> <span class=\"token punctuation\">:</span> status<span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"short\"</span> <span class=\"token punctuation\">:</span> <span class=\"token boolean\">True</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">{</span>\n            <span class=\"token string\">\"title\"</span> <span class=\"token punctuation\">:</span> <span class=\"token string\">\"Application\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"value\"</span> <span class=\"token punctuation\">:</span> app_name<span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"short\"</span> <span class=\"token punctuation\">:</span> <span class=\"token boolean\">True</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">{</span>\n            <span class=\"token string\">\"title\"</span> <span class=\"token punctuation\">:</span> <span class=\"token string\">\"Deployment Group\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"value\"</span> <span class=\"token punctuation\">:</span> deploy_group_name<span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"short\"</span> <span class=\"token punctuation\">:</span> <span class=\"token boolean\">True</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">{</span>\n            <span class=\"token string\">\"title\"</span> <span class=\"token punctuation\">:</span> <span class=\"token string\">\"Region\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"value\"</span> <span class=\"token punctuation\">:</span> message<span class=\"token punctuation\">[</span><span class=\"token string\">'region'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"short\"</span> <span class=\"token punctuation\">:</span> <span class=\"token boolean\">True</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">{</span>\n            <span class=\"token string\">\"title\"</span> <span class=\"token punctuation\">:</span> <span class=\"token string\">\"Deployment Link\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"value\"</span> <span class=\"token punctuation\">:</span> <span class=\"token string\">'https://'</span><span class=\"token operator\">+</span>message<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">'region'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">+</span><span class=\"token string\">'.console.aws.amazon.com/codedeploy/home?region='</span><span class=\"token operator\">+</span>message<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">'region'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">+</span><span class=\"token string\">'#/deployments/'</span><span class=\"token operator\">+</span>deploy_id<span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"short\"</span> <span class=\"token punctuation\">:</span> <span class=\"token boolean\">True</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">{</span>\n            <span class=\"token string\">\"title\"</span> <span class=\"token punctuation\">:</span> <span class=\"token string\">\"Create Time\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"value\"</span> <span class=\"token punctuation\">:</span> utc_to_kst<span class=\"token punctuation\">(</span>create_time<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"short\"</span> <span class=\"token punctuation\">:</span> <span class=\"token boolean\">True</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">{</span>\n            <span class=\"token string\">\"title\"</span> <span class=\"token punctuation\">:</span> <span class=\"token string\">\"Complete Time\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"value\"</span> <span class=\"token punctuation\">:</span> utc_to_kst<span class=\"token punctuation\">(</span>complete_time<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"short\"</span> <span class=\"token punctuation\">:</span> <span class=\"token boolean\">True</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">{</span>\n            <span class=\"token string\">\"title\"</span> <span class=\"token punctuation\">:</span> <span class=\"token string\">\"Error Code\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"value\"</span> <span class=\"token punctuation\">:</span> message<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">'errorInformation'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">'ErrorCode'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"short\"</span> <span class=\"token punctuation\">:</span> <span class=\"token boolean\">True</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">{</span>\n            <span class=\"token string\">\"title\"</span> <span class=\"token punctuation\">:</span> <span class=\"token string\">\"Error Message\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"value\"</span> <span class=\"token punctuation\">:</span> message<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">'errorInformation'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">'ErrorMessage'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"short\"</span> <span class=\"token punctuation\">:</span> <span class=\"token boolean\">True</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">]</span>\n    \n    slack_message <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token string\">'text'</span><span class=\"token punctuation\">:</span> subject<span class=\"token punctuation\">,</span>\n        <span class=\"token string\">'username'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'CodeDeploy'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">'icon_emoji'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">':codedeploy:'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">'channel'</span><span class=\"token punctuation\">:</span> os<span class=\"token punctuation\">.</span>environ<span class=\"token punctuation\">[</span><span class=\"token string\">'slackChannel'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">'attachments'</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n            <span class=\"token punctuation\">{</span>\n                <span class=\"token string\">'fields'</span><span class=\"token punctuation\">:</span> fields<span class=\"token punctuation\">,</span>        \n                <span class=\"token string\">'color'</span><span class=\"token punctuation\">:</span> color<span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">}</span>\n\n    req <span class=\"token operator\">=</span> Request<span class=\"token punctuation\">(</span>HOOK_URL<span class=\"token punctuation\">,</span> json<span class=\"token punctuation\">.</span>dumps<span class=\"token punctuation\">(</span>slack_message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>encode<span class=\"token punctuation\">(</span><span class=\"token string\">'utf-8'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span>\n        response <span class=\"token operator\">=</span> urlopen<span class=\"token punctuation\">(</span>req<span class=\"token punctuation\">)</span>\n        response<span class=\"token punctuation\">.</span>read<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        logger<span class=\"token punctuation\">.</span>info<span class=\"token punctuation\">(</span><span class=\"token string\">\"Message posted\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">except</span> HTTPError <span class=\"token keyword\">as</span> e<span class=\"token punctuation\">:</span>\n        logger<span class=\"token punctuation\">.</span>error<span class=\"token punctuation\">(</span><span class=\"token string\">\"Request failed: %d %s\"</span><span class=\"token punctuation\">,</span> e<span class=\"token punctuation\">.</span>code<span class=\"token punctuation\">,</span> e<span class=\"token punctuation\">.</span>reason<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">except</span> URLError <span class=\"token keyword\">as</span> e<span class=\"token punctuation\">:</span>\n        logger<span class=\"token punctuation\">.</span>error<span class=\"token punctuation\">(</span><span class=\"token string\">\"Server connection failed: %s\"</span><span class=\"token punctuation\">,</span> e<span class=\"token punctuation\">.</span>reason<span class=\"token punctuation\">)</span></code></pre></div>\n<p>해당 코드는 <a href=\"https://jojoldu.tistory.com/298\">이동욱님의 블로그</a>를 참고하였습니다. 코드 작성 이외에 환경 변수에 슬랙 채널과 webhook 주소를 등록해주었습니다.</p>\n<h2 id=\"AWS-SNS-주제-생성\" style=\"position:relative;\"><a href=\"#AWS-SNS-%EC%A3%BC%EC%A0%9C-%EC%83%9D%EC%84%B1\" aria-label=\"AWS SNS 주제 생성 permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>AWS SNS 주제 생성</h2>\n<p>위에서 람다를 새로 생성하였지만 이를 트리거 시킬 것이 없는 상태입니다. 따라서 작성한 람다가 잘 동작할 수 있게 SNS를 추가하려고 합니다. 생성 이후 작성한 람다에 트리거로 추가해주면 됩니다. <del>이름은 무시해주세요.</del></p>\n<p><span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;'>\n      <a class='gatsby-resp-image-link' href='/static/4a663b8f6fad6345cba4c9ca51c83f52/bbbf7/1.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 41.1764705882353%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsSAAALEgHS3X78AAAA6UlEQVR42q2RyW7DMAxE9f9f16bbpe0lTtBYtlZ6kbxMRSYBmqBNLiXwYFmgZrio949PPDxuhJfXN2yensF3kQghxl/xIeBQ19BNg1o3+DrUqHZ7GGuhWmNQVTtoreGcg/MeoTzo+v6C/gSfqcA5IcQjbOKDGCnnPLbbCuM4Yl1XzPMsTNN0QUpJuL4/w2/YTFHXFRdCV745Z/wVwzCI4K3gHMVlGmPBlXJLy7IIHOx8PhMV40jSxU1Ba91pho0I8zxSyiLUtq0kHQVJ5navC8Xb5Mr+I0SQN8tznMpQc2kx/xj09f89eCnfriNub/4uPG4AAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='1' title='' src='/static/4a663b8f6fad6345cba4c9ca51c83f52/ca1dc/1.png' srcset='/static/4a663b8f6fad6345cba4c9ca51c83f52/e7570/1.png 170w,\n/static/4a663b8f6fad6345cba4c9ca51c83f52/f46e7/1.png 340w,\n/static/4a663b8f6fad6345cba4c9ca51c83f52/ca1dc/1.png 680w,\n/static/4a663b8f6fad6345cba4c9ca51c83f52/02d09/1.png 1020w,\n/static/4a663b8f6fad6345cba4c9ca51c83f52/bbbf7/1.png 1280w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span></p>\n<h2 id=\"어플리케이션에-트리거-추가\" style=\"position:relative;\"><a href=\"#%EC%96%B4%ED%94%8C%EB%A6%AC%EC%BC%80%EC%9D%B4%EC%85%98%EC%97%90-%ED%8A%B8%EB%A6%AC%EA%B1%B0-%EC%B6%94%EA%B0%80\" aria-label=\"어플리케이션에 트리거 추가 permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>어플리케이션에 트리거 추가</h2>\n<p>이제 마지막으로 해주어야 할 것은 앞서 SNS에 생성한 주제를 CodeDeploy의 이벤트가 발생했을 시 SNS로 전송하도록 하는 것입니다.</p>\n<p>원하는 어플리케이션 선택 -> 편집 -> 고급 에 아래와 같이 트리거를 생성하였습니다. 트리거 생성시 미리 생성해둔 SNS를 선택하면 됩니다.</p>\n<p><span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;'>\n      <a class='gatsby-resp-image-link' href='/static/11aabcc9d8107bb001255d44dec2ed0d/bbbf7/2.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 24.705882352941178%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAxElEQVR42pWQyQ7DIAxE8//f2FbdUmg2CAHCEmlqW02kHnsY2dieZ6BRWuN6u+N0vsAty19avJfoQ0CIQc5N277QvhS2bUNKCSnnQ6UW5FJ+arsYYp0jUETX93g8W9jZoXFUtHbGuq4CLQTY5X1AJnOtVc4c91yWk9g3GQNDDM83ZEigbeM0IctAOoz63WGmrflrZMUQZclGffbyXD8MAue8iQTgayulofRbmvxM1jCO37oWOOf8RcZY+o56zHX9QL5R8g+JVIEwEXNhgQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='2' title='' src='/static/11aabcc9d8107bb001255d44dec2ed0d/ca1dc/2.png' srcset='/static/11aabcc9d8107bb001255d44dec2ed0d/e7570/2.png 170w,\n/static/11aabcc9d8107bb001255d44dec2ed0d/f46e7/2.png 340w,\n/static/11aabcc9d8107bb001255d44dec2ed0d/ca1dc/2.png 680w,\n/static/11aabcc9d8107bb001255d44dec2ed0d/02d09/2.png 1020w,\n/static/11aabcc9d8107bb001255d44dec2ed0d/bbbf7/2.png 1280w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span></p>\n<h2 id=\"결과\" style=\"position:relative;\"><a href=\"#%EA%B2%B0%EA%B3%BC\" aria-label=\"결과 permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>결과</h2>\n<p>배포 성공 시 아래와 같은 결과를 슬랙에서 받아볼 수 있습니다.</p>\n<p><span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;'>\n      <a class='gatsby-resp-image-link' href='/static/6a94bd53900f6362613b97c2a807445d/bbbf7/3.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 51.764705882352935%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsSAAALEgHS3X78AAABqklEQVR42mVSW5KcMAzcm+yAAWOeBvN+DzCVSuUjVfnITXKKHLoja8Nkp/LRZYzkVrekt3b7heP7b4zTgOPxFW0/oelGPqVKEUYZdFFDxTkhQxAmSLKSESWa476MIXzFeFPJA3r+iXHdMEwbStOibkf+jtOCHxZlg0xXmNeD75ruORWx/5K85CJPQtdx4RQRmmnBvOyclJc1bq6EIyRcL8S747OSZTu4kM2xj29uwHGLJ6EQCn5dY9h2nGQ5yw0neEHECdcZqATr/cR+fMG03FE3w4tV4UcXIT2uDObzwQqt/Ivkgi1g/08UX+4PNP1MVit4Nm7VMeRFKEmhgW47VHVH/al5GJ9tWFg1quwhdYcwq+HFBdwwgwhTiEhDpNQGEvIkdGSE95uPm5AvVp8qCU45w5m+wa02eGaGR+RMlBiIuCTC+B+hTDVU9LEWttnOX+ILtkDYblDHD4T9CSfv4DKR/t+yR4QdNXqj/nTDwmsRU4HLtj1D2sN9P7HSNozDjEIbBNaF91qYh+KbEqYf0Q8rk1mlkvB5KHaxWyKyg6maEYqW+nXKH4R/AKWhMoet74BcAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='3' title='' src='/static/6a94bd53900f6362613b97c2a807445d/ca1dc/3.png' srcset='/static/6a94bd53900f6362613b97c2a807445d/e7570/3.png 170w,\n/static/6a94bd53900f6362613b97c2a807445d/f46e7/3.png 340w,\n/static/6a94bd53900f6362613b97c2a807445d/ca1dc/3.png 680w,\n/static/6a94bd53900f6362613b97c2a807445d/02d09/3.png 1020w,\n/static/6a94bd53900f6362613b97c2a807445d/bbbf7/3.png 1280w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span></p>","frontmatter":{"title":"Code deploy에 알림을 추가하자","date":"March 22, 2025","update":"March 22, 2025","tags":["AWS","Code deploy"],"series":null},"fields":{"slug":"/code-deploy-alert/","readingTime":{"minutes":3.81}}},"seriesList":{"edges":[{"node":{"id":"60a52a2c-f7fe-5503-9f9a-d05fda47776b","fields":{"slug":"/2025-03-18-카프카-데이터플랫폼의-최강자-ch3/"},"frontmatter":{"title":"카프카, 데이터 플랫폼의 최강자 3장"}}},{"node":{"id":"26875d4a-735a-5299-87e3-b4a53600ec6b","fields":{"slug":"/pycharm-operation-not-permitted/"},"frontmatter":{"title":"PyCharm - Operation not permitted"}}},{"node":{"id":"0104e895-f5ea-580a-8d40-329236045d50","fields":{"slug":"/code-deploy-alert/"},"frontmatter":{"title":"Code deploy에 알림을 추가하자"}}},{"node":{"id":"ba2ce2fa-9257-5c0d-bfc2-cf29645e2683","fields":{"slug":"/code-deploy-failure/"},"frontmatter":{"title":"Code deploy 는 왜 배포에 실패했을까?"}}},{"node":{"id":"a1cbf30b-c9ed-579e-a2b2-692196a521f4","fields":{"slug":"/2025-03-18-카프카-데이터플랫폼의-최강자-ch4/"},"frontmatter":{"title":"카프카, 데이터 플랫폼의 최강자 4장"}}},{"node":{"id":"b14175ad-566c-5d99-a83a-4b1ebab9351a","fields":{"slug":"/카프카-데이터플랫폼의-최강자-ch7/"},"frontmatter":{"title":"카프카, 데이터 플랫폼의 최강자 4장"}}},{"node":{"id":"7e13a133-f5da-5515-8696-225492d0be99","fields":{"slug":"/2025-04-08-카프카-데이터플랫폼의-최강자-ch5/"},"frontmatter":{"title":"카프카, 데이터 플랫폼의 최강자 5장"}}},{"node":{"id":"bd5e375b-efa3-5730-adce-e46bbc4d1307","fields":{"slug":"/2025-03-18-카프카-데이터플랫폼의-최강자-ch9/"},"frontmatter":{"title":"카프카, 데이터 플랫폼의 최강자 9장"}}},{"node":{"id":"7fa08ef7-dee3-582c-9178-7b8fda394559","fields":{"slug":"/real-mysql-8.0-1-ch5/"},"frontmatter":{"title":"Real MySQL 8.0 1권 - 05 트랜잭션과 잠금"}}},{"node":{"id":"badbe153-d90e-5c4b-ac28-b4ae09a6c8ae","fields":{"slug":"/real-mysql-8.0-1-ch4/"},"frontmatter":{"title":"Real MySQL 8.0 1권 - 04 아키텍처"}}},{"node":{"id":"ed109d56-a286-5cfa-9349-03a32320668d","fields":{"slug":"/mysql-change-pwd/"},"frontmatter":{"title":"MySQL 8.0 계정의 비밀번호 변경하기"}}},{"node":{"id":"a5cd5895-3ede-586b-8955-0fa0082ca19c","fields":{"slug":"/postman-config/"},"frontmatter":{"title":"postman 환경 변수 사용하기"}}},{"node":{"id":"b9b7a5b2-905a-50ce-9ca7-d0ee132aa555","fields":{"slug":"/sqlalchemy-connection-pool-not-available/"},"frontmatter":{"title":"SQLAlchemy connection pool 설정을 통한 MySQL Connection not available 회피하기"}}},{"node":{"id":"6f147fa2-3aef-5867-92ea-c9209172a1da","fields":{"slug":"/Trie/"},"frontmatter":{"title":"자료구조 - Trie"}}},{"node":{"id":"8c781474-acd9-5314-983c-ad0ff7d4adbc","fields":{"slug":"/2025-05-05-개발자를-위한-레디스-ch1/"},"frontmatter":{"title":"개발자를 위한 레디스 1장"}}},{"node":{"id":"43843900-7613-5d1b-b8eb-cbdcde4f61ce","fields":{"slug":"/2025-05-06-개발자를-위한-레디스-ch3/"},"frontmatter":{"title":"개발자를 위한 레디스 3장"}}},{"node":{"id":"78a85471-28fe-5388-8ad1-81c1bd5a82db","fields":{"slug":"/2025-05-10-개발자를-위한-레디스-ch4/"},"frontmatter":{"title":"개발자를 위한 레디스 4장"}}},{"node":{"id":"faa8518f-86c1-55ac-bbf8-351dc302f7c1","fields":{"slug":"/about/"},"frontmatter":{"title":"This is about page ✋"}}}]},"previous":{"fields":{"slug":"/pycharm-operation-not-permitted/"},"frontmatter":{"title":"PyCharm - Operation not permitted"}},"next":{"fields":{"slug":"/code-deploy-failure/"},"frontmatter":{"title":"Code deploy 는 왜 배포에 실패했을까?"}}},"pageContext":{"id":"0104e895-f5ea-580a-8d40-329236045d50","series":null,"previousPostId":"26875d4a-735a-5299-87e3-b4a53600ec6b","nextPostId":"ba2ce2fa-9257-5c0d-bfc2-cf29645e2683"}},"staticQueryHashes":[],"slicesMap":{}}