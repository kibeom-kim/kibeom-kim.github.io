---
title: 카프카, 데이터 플랫폼의 최강자 4장
date: 2025-03-23
update: 2025-03-23
tags: 
    - kafka
---


7,8은 실습이랑 프로세서 관련이라 별 적을게 없네요

카프카
카프카 로그는 다음에 저장된다.
usr/local/kafka logs 디렉토리

키바나 - 엘라스틱 서치에서 제공한다

[카프카 스트림]
상태기반 처리 - 이전 처리 상태를 참고해야함

상태기반예시 - 단어빈도수 측정, 실시간 추천 프로그렘
=> 추가로 알아볼 것 : 어떻게 저런 프로그램을 구성하는지

무상태 스트림 처리 - 이전 처리상태를 참고할 필요가 없다.


카프카 스트림즈 - 가벼운 클라이언트 라이브러리이다
시스템이나 카프카에 대한 의존성이 없다.
=> 그럼 카프카 랑 카프카 스트림즈는 완전 별개로 동작하는 애들인건가???

이중화된 로컬 저장소 제공
장애가 생기더라도 동일한 스트림에 대해는 1번만 처리

소스 프로세서 = 위에 아무것도 없는 말그대로 소스 그자체 프로세서
싱크 프로세서 = 토픽에 전달하는 프로세서. 순서대로 받아서 마지막에 해당되는 프로세서

---
# 카프카 운영
#### 카프카 디스크 사용량이 많은 경우
- 로그 보관 주기를 짧게 세팅한다.
- 디스크를 많이 차지하는 토픽을 주로 조절한다.
#### 파티션 수 조절을 통한 성능 향상
- 래그가 쌓이는 경우, 파티션의 수를 늘려야 한다.
- 파티션의 수를 늘리는 만큼 컨슈머의 수도 늘려야 한다.
- 특정 파티션만 래그가 늘어난다면 컨슈머의 상태를 체크해야 한다.
#### 브로커 수 조절을 통한 고가용성 확보
- 브로커의 수를 늘리면 고가용성 확보에 좋다
- 3대는 최대 1대 장애까지 tolerant하고 5대는 2대 장애까지 tolerant하다.
- 처리량도 는다.
- 3대로 운영하다가 처리량이라던가 필요한 고가용성에 따라서 늘리는 것이 좋다
#### 카프카 매니저는 필수다
#### 옵션 변경은 ?
- 원하는 옵션을 변경하고 클러스터 내 브로커를 1대씩 재시쟉해야한다.
#### heap 사이즈
5-6 GB로 세팅하고 남은 메모리는 페이지 캐시로 활용하는것을 권장한다.